{% extends 'Utilisateurs/utilisateursLayout.html.twig' %}
{% block page %}
    <h1>Bars list</h1>

    <table>
        <thead>
            <tr>
                <th>Bar_id</th>
                <th>Name</th>
                <th>Ville</th>
                {% if is_granted("ROLE_PROR") %}
                <th>Actions</th>
                {% endif %}
            </tr>
        </thead>


        <tbody>
        {% for bar in bars %}
            <tr>
                <td><a href="{{ path('bar_show', { 'id': bar.id }) }}">{{ bar.id }}</a></td>
                <td>{{ bar.name }}</td>
                <td>{{ bar.ville }}</td>
                <td>
                    <ul>
                        <li>
                            <a href="{{ path('bar_show', { 'id': bar.id }) }}">show</a>
                        </li>
                        {% if is_granted("ROLE_PROP") and app.user.id==bar.userId.id %}
                            <li>
                                <a href="{{ path('bar_edit', { 'id': bar.id }) }}">edit</a>
                            </li>
                        {% endif %}
                        {% if is_granted("ROLE_ADMIN") %}
                            <li>
                                <a href="{{ path('bar_delete', { 'id': bar.id }) }}">Delete the bar</a>
                            </li>
                        {% endif %}
                    </ul>
                </td>
            </tr>
            {{ dump(bar) }}
        {% endfor %}
        </tbody>
    </table>
    {% if is_granted("ROLE_PROP") %}
    {% endif %}
    {% if is_granted("ROLE_ADMIN") %}
    <ul>
        <li>
            <a href="{{ path('bar_new') }}">Create a new bar</a>
        </li>
    </ul>

{% endif %}
{% endblock %}
